@page "/exerciselogging"
@rendermode InteractiveServer
@inject NavigationManager NavigationManager
@inject WebsiteFirstDraft.Data.Models.AppDbContext Db
@inject UserSessionService Session
@using WebsiteFirstDraft.Data
@using WebsiteFirstDraft.Data.Models
@using BlazorBootstrap.Components
@*Imported from food logging page.*@
<h3 class=text-center>ExerciseLogging</h3>
<link rel="stylesheet " href="~/customcsspages/FoodLogging.css" />


<p class="blockquote text-center">Welcome to the Exercise Logging Page</p>
<p class="blockquote text-center">Here you can search for exercises from our database and add/remove entries</p>


<div class="container-fluid">
    <div class="row d-flex align-items-stretch">

        <!-- Textarea column -->
        <div class="col-sm-10 d-flex">

            <textarea class="form-control w-100" style="resize:none; min-height:70px;"
                      placeholder="Search for Exercise from Database"></textarea>

        </div>

        <!-- Button column -->
        <div class="col-sm-2 d-flex">
            <button type="button" class="btn btn-secondary" @onclick="NavToHypertrophy">Hypertrophy page</button>
        </div>

    </div>
</div>

<hr />
<div class="container-fluid">
    <div class="row d-flex align-items-stretch">

        <table>
            <thead>
                <tr>
                    <th>Exercise Types</th>
                    <th>Exercise Names</th>
                    <th>Calories Burnt Per Minute</th>
                    <th>Intensity Level</th>
@*                     <th>Exercise Grade</th>
                    <th>Exercise Duration</th> *@
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var exerciseType in exercise_types)
                {
                    <tr>
                        <td>
                            <input @bind="exerciseType.ExerciseTypes" />
                        </td>
                        <td>
                            <input @bind="exerciseType.ExerciseNames" />
                        </td>
                         <td>
                            <input @bind="exerciseType.CaloriesBurnedPerMinute" />
                        </td>
                        <td>
                            <input @bind="exerciseType.IntensityLevel" class=@IntensityColour(exerciseType) />
                        </td> 
                        <td>
                            <Button Color="ButtonColor.Success" @onclick="() => Update(exerciseType)">Save</Button>
                            <Button Color="ButtonColor.Danger" @onclick="() => Delete(exerciseType.Id)">Delete</Button>
                            <Button Color="ButtonColor.Primary" @onclick="() => OpenPopup(exerciseType)">Log Exercise</Button>
                        </td>
                    </tr>
                }
                <tr>
                    <td>
                        <input @bind="newExerciseType.ExerciseTypes"/>
                    </td>
                    <td>
                        <input @bind="newExerciseType.ExerciseNames" />
                    </td>
                    <td>
                        <input @bind="newExerciseType.CaloriesBurnedPerMinute" />
                    </td>
                    <td>
                        <input @bind="newExerciseType.IntensityLevel" />
                    </td>
                    <td>
                        <button type="button" @onclick="() => Create()">Add</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <Popup @bind-IsVisible="showPopup" Title="Exercise Logging Page">
            <p>Name of Exercise</p>
            @*Need to implement a toggle system*@



            <div class="container">

                @*Duration*@
                <div class="row align-items-center mb-3">
                    <div class="col-4 text-end">
                        <label class="form-label mb-0">Duration (minutes)</label>
                    </div>
                    <div class="col-8">
                        <div class="input-group" style="max-width: 160px;">
                            @*Minus button*@
                            <button class="btn btn-outline-secondary" @onclick="DecrementDuration" disabled="@(duration <= 0)">−</button>

                            @*Numeric bound input*@
                            <input type="number" class="form-control text-center" @bind="duration"/>

                            @*Plus button*@
                            <button class="btn btn-outline-secondary" @onclick="IncrementDuration">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-sm-flex justify-content-between">
                <button type="button" class="btn btn-primary" @onclick="() => DisplayLog(duration)">Log</button>
                <button type="button" class="btn btn-primary">Graphs</button>
            </div>

            @if(display)
            {
                <br />
                <p>Do you wish to log @caloriesBurnt burnt calories?</p>
                <Button Color="ButtonColor.Primary" @onclick="LogCalories">Confirm</Button>
                <p>@errorMessage</p>
            }
        </Popup>

@*         <div class="col-sm-10 d-flex">
            <ul class="list-group w-100">
                <li class="list-group-item">An item</li>
                <li class="list-group-item">A second item</li>
                <li class="list-group-item">A third item</li>
                <li class="list-group-item">A fourth item</li>
                <li class="list-group-item">And a fifth one</li>
            </ul>
        </div> *@

        @*No longer needed*@
@*         <div class="col-sm-2 d-flex flex-column">

            <div class="flex-grow-1 mb-2">
                <div class="form-control d-flex justify-content-center align-items-center h-100">
                    Exercise Grade: A
                </div>
            </div>

            <div class="flex-grow-3 mb-2">
                <textarea class="form-control w-100 h-100"
                          placeholder="Input Exercise Duration"></textarea>
            </div>

            <div class="flex-grow-1 d-flex">
                <button type="button" class="btn btn-primary w-100 h-100">
                    Enter
                </button>
            </div>

        </div> *@

    </div>
</div>



@* No longer needed  *@
@* <label>Manual Entry</label>
<div class="form-floating textbox">
    <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
    <label for="floatingTextarea">Exercise</label>
</div>

<div class="form-floating textbox">
    <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
    <label for="floatingTextarea">Duration</label>
</div>

<div class="form-floating textbox">
    <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
    <label for="floatingTextarea">Calories</label>
</div> *@


@*Wraps the enter and the dieting advice button onto the same row using the appropriate
    bootstrap class.
*@
@* <div class="d-sm-flex justify-content-between">
    <button type="button" class="btn btn-secondary">Enter</button>
    <button type="button" class="btn btn-info" @onclick="NavToExerciseQuestionnaire">Exercise advice</button>
</div> *@

